package database

import (
	_ "github.com/lib/pq"
)

var Schema = `
CREATE TABLE IF NOT EXISTS blocks_with_earnings (
    Id integer GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,

    BlockNumber     integer NOT NULL,
    BlockHash       text NOT NULL,
    ParentHash      text NOT NULL,
    BlockTimestamp  integer NOT NULL,
    CoinbaseAddress text NOT NULL,

    Difficulty bigint,
    NumUncles  integer NOT NULL,
    NumTx      integer NOT NULL,

    IsReorged  boolean NOT NULL,
    IsUncle    boolean NOT NULL,
    IsChild    boolean NOT NULL,
    ReorgDepth integer NOT NULL,

    CoinbaseDiffWei  NUMERIC(48, 0) NOT NULL,
    CoinbaseDiffEth  DOUBLE PRECISION NOT NULL
);
`

type BlockEntry struct {
	Id              int
	BlockNumber     int
	BlockHash       string
	ParentHash      string
	BlockTimestamp  int
	CoinbaseAddress string

	Difficulty int64
	NumUncles  int
	NumTx      int

	IsReorged  bool
	IsUncle    bool
	IsChild    bool
	ReorgDepth int

	CoinbaseDiffWei string
	CoinbaseDiffEth float64
}
